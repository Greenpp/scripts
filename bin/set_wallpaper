#!/bin/sh

# Dependencies check
type sxiv 2>&1 >/dev/null || echo 'sxiv required'; exit 1
type feh 2>&1 >/dev/null || echo 'feh required'; exit 1


if [ $# -eq 1 ] && [ -f $1 ]; then
    wp=$1
else
    wp=$(sxiv -bfot $HOME/Wallpapers/*)
fi

if [ -f $wp ]; then
    wp_dir="$HOME/Wallpapers/"
    ext=$(basename $wp | cut -d '.' -f2)
    rm "$wp_dir.current_wallpaper."* 2>&1 >/dev/null
    cp $wp "$wp_dir.current_wallpaper.$ext"
    feh --bg-scale "$wp_dir.current_wallpaper.$ext"
fi

