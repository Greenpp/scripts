#!/bin/bash

text=$(xclip -o)
if [[ $? -ne 0 ]]; then
    exit 1
fi

actions=('google')

if [[ $text =~ (https?://)?(www\.)?\w*\.\w* ]]; then
    actions+=('open url')
else
    actions+=('wiki')
fi

action=$(printf "%s\n" "${actions[@]}" | dmenu)

case $action in
    'google')
        $BROWSER "https://www.google.com/search?q=$text" >/dev/null 2>&1 &
        ;;
    'wiki')
        $BROWSER "https://en.wikipedia.org/wiki/$text" >/dev/null 2>&1 &
        ;;
    'open url')
        $BROWSER $text >/dev/null 2>&1 &
        ;;
esac
